<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Animal Buttons</title>
</head>

<body>

  <!--<button data-animal="cat">meow</button>
  <button data-animal="dog">woof</button>
  <button data-animal="bird">chirp</button>-->
  
<div id="buttonAnimals"></div>

  <div id="gifs-appear-here">
  </div>

  <script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
  <script type="text/javascript">

    var topics = ["cat", "dog", "bird"];

    init();
    
    function init(){
        for (var i =0; i< topics.length; i++){        
        // create a button based on array
        console.log("My Topics: " +topics[i]);                 
        var btn= $('<button/>',
        {
            text: topics[i],
            'data-animal': topics[i]
            
        })
        $("#buttonAnimals").append(btn);    
    }
}

    $("button").on("click", function() {
    
    $('#gifs-appear-here').empty();

      var animal = $(this).attr("data-animal");
      var queryURL = "http://api.giphy.com/v1/gifs/search?q=" +
        animal + "&api_key=dc6zaTOxFJmzC&limit=10";
      $.ajax({
        url: queryURL,
        method: "GET"
      }).done(function(response) {

        var results = response.data;
        

         for (var i = 0; i < results.length; i++) {          
        
                var imgResponse = response.data[i].images.fixed_height.url;
                var stillImage = response.data[i].images.fixed_height_still.url;
                var still = response.data[i].images.fixed_height_still.url;

                 var img = $('<img />',
                    { id: 'Myid',
                        src: stillImage,
                        'data-animate': imgResponse, 
                        'data-still': still,
                         width: 300,
                         on: {
                          click:function() {                                                                                      
                            $(this).attr('src', $(this).data('animate')).click(function(){
                                $(this).attr('src', $(this).data('still'));                                                   
                        });                            
                      }
                    }
                  })
                    .appendTo($('#gifs-appear-here')).empty();            
         }
      });
    });

  </script>
</body>

</html>
